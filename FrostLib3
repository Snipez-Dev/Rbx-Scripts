-- VanUI (Library) — Single instance, built-in Close/Minimize, fixed Slider, title-only drag area, wider layout
local Library = {}
Library.Windows = {}
Library.MainWindow = nil

local function New(ClassName, Properties)
	local Object = Instance.new(ClassName)
	if Properties then
		for Property, Value in next, Properties do
			pcall(function() Object[Property] = Value end)
		end
	end
	return Object
end

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
local TextService = game:GetService("TextService")

local function find_existing_gui()
	for _, container in ipairs({CoreGui, (Players.LocalPlayer and Players.LocalPlayer:FindFirstChild("PlayerGui"))}) do
		if container then
			local g = container:FindFirstChild("VanUI")
			if g then return g, container end
		end
	end
	return nil, nil
end

function Library:CreateWindow(title)
	-- enforce single instance
	if Library.MainWindow then
		return Library.MainWindow
	end

	-- destroy any existing ScreenGui named VanUI so we create fresh
	local existingGui = find_existing_gui()
	if existingGui then
		pcall(function() existingGui:Destroy() end)
	end

	local Window = {}
	local SeizureUI = New("ScreenGui", {
		Name = "VanUI",
		ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
		ResetOnSpawn = false
	})

	local ok = pcall(function() SeizureUI.Parent = CoreGui end)
	if not ok then
		SeizureUI.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
	end

	Window._SeizureUI = SeizureUI

	local FULL_SIZE = UDim2.new(0, 740, 0, 420) -- wider to the right
	local MINIMIZED_SIZE = UDim2.new(0, 740, 0, 40)

	local Background = New("Frame", {
		Name = "Background",
		Parent = SeizureUI,
		AnchorPoint = Vector2.new(0.5, 0.5),
		BackgroundColor3 = Color3.fromRGB(7, 7, 7),
		BorderSizePixel = 0,
		ClipsDescendants = true,
		Position = UDim2.new(0.5, 0, 0.45, 0),
		Size = UDim2.new(0, 0, 0, 0),
		BackgroundTransparency = 1
	})
	New("UICorner", {CornerRadius = UDim.new(0.02, 0), Parent = Background})

	local BackgroundStroke = New("UIStroke", {
		Color = Color3.fromRGB(25, 25, 25),
		Thickness = 1,
		Transparency = 1,
		Parent = Background
	})

	TweenService:Create(Background, TweenInfo.new(0.45, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = FULL_SIZE,
		BackgroundTransparency = 0
	}):Play()

	task.wait(0.25)
	TweenService:Create(BackgroundStroke, TweenInfo.new(0.25), {Transparency = 0}):Play()

	-- Title (VanUI) — drag only when interacting with this label
	local TitleLabel = New("TextLabel", {
		Name = "title",
		Parent = Background,
		BackgroundTransparency = 1,
		Position = UDim2.new(0.03, 0, 0.03, 0),
		Size = UDim2.new(0, 500, 0, 28),
		Font = Enum.Font.GothamMedium,
		Text = "VanUI",
		TextColor3 = Color3.fromRGB(255, 255, 255),
		TextSize = 16,
		TextXAlignment = Enum.TextXAlignment.Left,
		TextYAlignment = Enum.TextYAlignment.Center
	})

	-- Close & Minimize controls (styled like background; icons are grey)
	local ControlsFrame = New("Frame", {
		Name = "WindowControls",
		Parent = Background,
		BackgroundTransparency = 1,
		Size = UDim2.new(0, 100, 0, 30),
		Position = UDim2.new(1, -110, 0, 6)
	})

	local MinBtn = New("TextButton", {
		Name = "Minimize",
		Parent = ControlsFrame,
		BackgroundTransparency = 0,
		BackgroundColor3 = Background.BackgroundColor3, -- same as bg
		Size = UDim2.new(0, 36, 0, 24),
		Position = UDim2.new(0, 0, 0, 0),
		Font = Enum.Font.Gotham,
		Text = "▭", -- minimal symbol
		TextSize = 16,
		TextColor3 = Color3.fromRGB(150, 150, 150),
		AutoButtonColor = false
	})
	New("UICorner", {Parent = MinBtn, CornerRadius = UDim.new(0.08, 0)})
	New("UIStroke", {Parent = MinBtn, Color = Color3.fromRGB(25, 25, 25), Thickness = 1})

	local CloseBtn = New("TextButton", {
		Name = "Close",
		Parent = ControlsFrame,
		BackgroundTransparency = 0,
		BackgroundColor3 = Background.BackgroundColor3, -- same as bg
		Size = UDim2.new(0, 36, 0, 24),
		Position = UDim2.new(0, 44, 0, 0),
		Font = Enum.Font.Gotham,
		Text = "✕",
		TextSize = 14,
		TextColor3 = Color3.fromRGB(150, 150, 150),
		AutoButtonColor = false
	})
	New("UICorner", {Parent = CloseBtn, CornerRadius = UDim.new(0.08, 0)})
	New("UIStroke", {Parent = CloseBtn, Color = Color3.fromRGB(25, 25, 25), Thickness = 1})

	-- Content background & containers (adjusted widths)
	local ContentBackground = New("Frame", {
		Parent = Background,
		BackgroundColor3 = Color3.fromRGB(15, 15, 15),
		BackgroundTransparency = 0.3,
		BorderSizePixel = 0,
		Position = UDim2.new(0.27, 0, 0.12, 0),
		Size = UDim2.new(0, 580, 0, 356)
	})
	New("UICorner", {CornerRadius = UDim.new(0.01, 0), Parent = ContentBackground})
	New("UIStroke", {Color = Color3.fromRGB(25, 25, 25), Thickness = 1, Parent = ContentBackground})

	local TabContainer = New("Frame", {
		Name = "TabContainer",
		Parent = Background,
		BackgroundTransparency = 1,
		Position = UDim2.new(0.03, 0, 0.14, 0),
		Size = UDim2.new(0, 160, 0, 340)
	})
	New("UIListLayout", {Parent = TabContainer, SortOrder = Enum.SortOrder.LayoutOrder, Padding = UDim.new(0, 8)})

	local ContentContainer = New("ScrollingFrame", {
		Name = "ContentContainer",
		Parent = Background,
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		Position = UDim2.new(0.270, 0, 0.116, 0),
		Size = UDim2.new(0, 580, 0, 368),
		CanvasSize = UDim2.new(0, 0, 0, 0),
		ScrollBarThickness = 6
	})
	New("UIPadding", {Parent = ContentContainer, PaddingLeft = UDim.new(0, 10), PaddingRight = UDim.new(0, 10), PaddingTop = UDim.new(0, 10)})
	local ContentLayout = New("UIListLayout", {Parent = ContentContainer, SortOrder = Enum.SortOrder.LayoutOrder, Padding = UDim.new(0, 8)})
	ContentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		ContentContainer.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y + 20)
	end)

	Window.Tabs = {}
	Window.CurrentTab = nil
	Window._isMinimized = false
	Window._prevSize = FULL_SIZE

	-- drag: only when dragging on the TitleLabel
	local dragging, dragInput, dragStart, startPos, dragTween
	TitleLabel.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = Background.Position
			if dragTween then dragTween:Cancel() end
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	TitleLabel.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - dragStart
			local newPosition = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
			if dragTween then dragTween:Cancel() end
			dragTween = TweenService:Create(Background, TweenInfo.new(0.09, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = newPosition})
			dragTween:Play()
		end
	end)

	-- Close behavior
	CloseBtn.MouseButton1Click:Connect(function()
		Window:Destroy()
	end)

	-- Minimize behavior
	MinBtn.MouseButton1Click:Connect(function()
		if Window._isMinimized then
			Window._isMinimized = false
			ContentContainer.Visible = true
			TabContainer.Visible = true
			TweenService:Create(Background, TweenInfo.new(0.22, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = Window._prevSize}):Play()
		else
			Window._isMinimized = true
			Window._prevSize = Background.Size
			ContentContainer.Visible = false
			TabContainer.Visible = false
			TweenService:Create(Background, TweenInfo.new(0.22, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = MINIMIZED_SIZE}):Play()
		end
	end)

	-- Tab / element APIs
	function Window:CreateTab(name)
		local Tab = {}
		local isFirstTab = #Window.Tabs == 0

		local TabButton = New("TextButton", {
			Name = "Tab_" .. name,
			Parent = TabContainer,
			BackgroundColor3 = Color3.fromRGB(15, 15, 15),
			BackgroundTransparency = isFirstTab and 0 or 1,
			BorderSizePixel = 0,
			Size = UDim2.new(0.96, 0, 0, 36),
			Font = Enum.Font.Gotham,
			Text = name,
			TextColor3 = isFirstTab and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(150, 150, 150),
			TextSize = 14,
			TextXAlignment = Enum.TextXAlignment.Left,
			AutoButtonColor = false
		})
		New("UIPadding", {Parent = TabButton, PaddingLeft = UDim.new(0, 8)})
		New("UICorner", {CornerRadius = UDim.new(0.08, 0), Parent = TabButton})
		local TabStroke = New("UIStroke", {Color = Color3.fromRGB(116, 116, 116), Thickness = 1, Transparency = isFirstTab and 0.8 or 1, ApplyStrokeMode = Enum.ApplyStrokeMode.Border, Parent = TabButton})

		TabButton.MouseButton1Click:Connect(function()
			if Window.CurrentTab == Tab then return end
			for _, t in pairs(Window.Tabs) do
				TweenService:Create(t.Button, TweenInfo.new(0.18), {BackgroundTransparency = 1, TextColor3 = Color3.fromRGB(150, 150, 150)}):Play()
				local stroke = t.Button:FindFirstChildOfClass("UIStroke")
				if stroke then TweenService:Create(stroke, TweenInfo.new(0.18), {Transparency = 1}):Play() end
			end
			TweenService:Create(TabButton, TweenInfo.new(0.18), {BackgroundTransparency = 0, TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
			TweenService:Create(TabStroke, TweenInfo.new(0.18), {Transparency = 0.8}):Play()
			Window.CurrentTab = Tab
			Window:RefreshContent()
		end)

		Tab.Button = TabButton
		Tab.Elements = {}
		table.insert(Window.Tabs, Tab)
		if isFirstTab then Window.CurrentTab = Tab end

		function Tab:AddParagraph(titleText, contentText)
			local Paragraph = {Type = "Paragraph", Title = titleText, Content = contentText, Visible = true}
			table.insert(Tab.Elements, Paragraph)
			Window:RefreshContent()
			return {
				Hide = function() Paragraph.Visible = false; Window:RefreshContent() end,
				Show = function() Paragraph.Visible = true; Window:RefreshContent() end
			}
		end

		function Tab:AddButton(text, callback)
			local Button = {Type = "Button", Text = text, Callback = callback, Visible = true}
			table.insert(Tab.Elements, Button)
			Window:RefreshContent()
			return {
				Hide = function() Button.Visible = false; Window:RefreshContent() end,
				Show = function() Button.Visible = true; Window:RefreshContent() end
			}
		end

		function Tab:AddToggle(text, default, callback)
			local Toggle = {Type = "Toggle", Text = text, Value = default or false, Callback = callback, Visible = true}
			table.insert(Tab.Elements, Toggle)
			Window:RefreshContent()
			return {
				Set = function(self, value) Toggle.Value = value; Window:RefreshContent() end,
				Hide = function() Toggle.Visible = false; Window:RefreshContent() end,
				Show = function() Toggle.Visible = true; Window:RefreshContent() end
			}
		end

		function Tab:AddSlider(text, min, max, default, callback)
			min = min or 0
			max = max or 100
			default = default == nil and min or default
			local Slider = {Type = "Slider", Text = text, Min = min, Max = max, Value = math.clamp(default, min, max), Callback = callback, Visible = true}
			table.insert(Tab.Elements, Slider)
			Window:RefreshContent()

			local api = {}
			api.Set = function(_, v)
				Slider.Value = math.clamp(v, Slider.Min, Slider.Max)
				Window:RefreshContent()
				if Slider.Callback then pcall(Slider.Callback, Slider.Value) end
			end
			api.Get = function() return Slider.Value end
			api.Hide = function() Slider.Visible = false; Window:RefreshContent() end
			api.Show = function() Slider.Visible = true; Window:RefreshContent() end
			return api
		end

		return Tab
	end

	function Window:RefreshContent()
		-- clear current frames
		for _, child in pairs(ContentContainer:GetChildren()) do
			if child:IsA("Frame") then
				child:Destroy()
			end
		end

		if not Window.CurrentTab then return end

		for _, element in pairs(Window.CurrentTab.Elements) do
			if element.Visible then
				if element.Type == "Paragraph" then
					local Paragraph = New("Frame", {Name = "Paragraph", Parent = ContentContainer, BackgroundColor3 = Color3.fromRGB(20,20,20), BorderSizePixel = 0, Size = UDim2.new(1,0,0,100)})
					New("UICorner", {CornerRadius = UDim.new(0.05,0), Parent = Paragraph})
					New("UIStroke", {Color = Color3.fromRGB(25,25,25), Thickness = 1, Parent = Paragraph})
					New("UIPadding", {Parent = Paragraph, PaddingBottom = UDim.new(0,12), PaddingLeft = UDim.new(0,12), PaddingRight = UDim.new(0,12), PaddingTop = UDim.new(0,12)})

					New("TextLabel", {
						Name = "Title",
						Parent = Paragraph,
						BackgroundTransparency = 1,
						Size = UDim2.new(1,0,0,20),
						Font = Enum.Font.GothamMedium,
						Text = element.Title or "",
						TextColor3 = Color3.fromRGB(255,255,255),
						TextSize = 14,
						TextWrapped = true,
						TextXAlignment = Enum.TextXAlignment.Left,
						TextYAlignment = Enum.TextYAlignment.Top
					})
					New("TextLabel", {
						Name = "Content",
						Parent = Paragraph,
						BackgroundTransparency = 1,
						Position = UDim2.new(0,0,0,22),
						Size = UDim2.new(1,0,1,-22),
						Font = Enum.Font.Gotham,
						Text = element.Content or "",
						TextColor3 = Color3.fromRGB(150,150,150),
						TextSize = 13,
						TextWrapped = true,
						TextXAlignment = Enum.TextXAlignment.Left,
						TextYAlignment = Enum.TextYAlignment.Top
					})

					task.spawn(function()
						task.wait()
						local titleSize = TextService:GetTextSize(element.Title or "", 14, Enum.Font.GothamMedium, Vector2.new(Paragraph.AbsoluteSize.X - 24, math.huge))
						local contentSize = TextService:GetTextSize(element.Content or "", 13, Enum.Font.Gotham, Vector2.new(Paragraph.AbsoluteSize.X - 24, math.huge))
						Paragraph.Size = UDim2.new(1,0,0,titleSize.Y + contentSize.Y + 32)
					end)

				elseif element.Type == "Button" then
					local ButtonFrame = New("Frame", {Name = "Button", Parent = ContentContainer, BackgroundColor3 = Color3.fromRGB(20,20,20), BorderSizePixel = 0, Size = UDim2.new(1,0,0,44)})
					New("UICorner", {CornerRadius = UDim.new(0.08,0), Parent = ButtonFrame})
					New("UIStroke", {Color = Color3.fromRGB(25,25,25), Thickness = 1, Parent = ButtonFrame})
					New("TextLabel", {Parent = ButtonFrame, BackgroundTransparency = 1, Position = UDim2.new(0.03,0,0,0), Size = UDim2.new(0.94,0,1,0), Font = Enum.Font.GothamMedium, Text = element.Text or "", TextColor3 = Color3.fromRGB(255,255,255), TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left})
					local ClickButton = New("TextButton", {Parent = ButtonFrame, BackgroundTransparency = 1, Size = UDim2.new(1,0,1,0), Text = "", AutoButtonColor = false})
					ClickButton.MouseButton1Click:Connect(function()
						TweenService:Create(ButtonFrame, TweenInfo.new(0.09), {BackgroundColor3 = Color3.fromRGB(30,30,30)}):Play()
						task.wait(0.09)
						TweenService:Create(ButtonFrame, TweenInfo.new(0.09), {BackgroundColor3 = Color3.fromRGB(20,20,20)}):Play()
						if element.Callback then pcall(element.Callback) end
					end)

				elseif element.Type == "Toggle" then
					local ToggleFrame = New("Frame", {Name = "Toggle", Parent = ContentContainer, BackgroundColor3 = Color3.fromRGB(20,20,20), BorderSizePixel = 0, Size = UDim2.new(1,0,0,44)})
					New("UICorner", {CornerRadius = UDim.new(0.08,0), Parent = ToggleFrame})
					New("UIStroke", {Color = Color3.fromRGB(25,25,25), Thickness = 1, Parent = ToggleFrame})
					New("TextLabel", {Parent = ToggleFrame, BackgroundTransparency = 1, Position = UDim2.new(0.03,0,0,0), Size = UDim2.new(0.78,0,1,0), Font = Enum.Font.GothamMedium, Text = element.Text or "", TextColor3 = Color3.fromRGB(255,255,255), TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left})
					local Indicator = New("Frame", {Parent = ToggleFrame, AnchorPoint = Vector2.new(1,0.5), BackgroundColor3 = element.Value and Color3.fromRGB(230,230,230) or Color3.fromRGB(30,30,30), BorderSizePixel = 0, Position = UDim2.new(0.97,0,0.5,0), Size = UDim2.new(0,18,0,18)})
					New("UICorner", {CornerRadius = UDim.new(0.5,0), Parent = Indicator})
					New("UIStroke", {Color = Color3.fromRGB(25,25,25), Thickness = 1, Parent = Indicator})
					local ClickButton = New("TextButton", {Parent = ToggleFrame, BackgroundTransparency = 1, Size = UDim2.new(1,0,1,0), Text = "", AutoButtonColor = false})
					ClickButton.MouseButton1Click:Connect(function()
						element.Value = not element.Value
						TweenService:Create(Indicator, TweenInfo.new(0.18), {BackgroundColor3 = element.Value and Color3.fromRGB(230,230,230) or Color3.fromRGB(30,30,30)}):Play()
						if element.Callback then pcall(element.Callback, element.Value) end
					end)

				elseif element.Type == "Slider" then
					local SliderFrame = New("Frame", {Name = "Slider", Parent = ContentContainer, BackgroundColor3 = Color3.fromRGB(20,20,20), BorderSizePixel = 0, Size = UDim2.new(1,0,0,56)})
					New("UICorner", {CornerRadius = UDim.new(0.06,0), Parent = SliderFrame})
					New("UIStroke", {Color = Color3.fromRGB(25,25,25), Thickness = 1, Parent = SliderFrame})
					New("UIPadding", {Parent = SliderFrame, PaddingLeft = UDim.new(0,12), PaddingRight = UDim.new(0,12), PaddingTop = UDim.new(0,8), PaddingBottom = UDim.new(0,8)})

					local Label = New("TextLabel", {Parent = SliderFrame, BackgroundTransparency = 1, Position = UDim2.new(0,0,0,0), Size = UDim2.new(0.55,0,0.55,0), Font = Enum.Font.GothamMedium, Text = element.Text or "Slider", TextColor3 = Color3.fromRGB(255,255,255), TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left, TextYAlignment = Enum.TextYAlignment.Top})
					local ValueLabel = New("TextLabel", {Parent = SliderFrame, BackgroundTransparency = 1, Position = UDim2.new(0.55,0,0,0), Size = UDim2.new(0.45,0,0.55,0), Font = Enum.Font.Gotham, Text = tostring(math.floor((element.Value)*100)/100), TextColor3 = Color3.fromRGB(150,150,150), TextSize = 13, TextXAlignment = Enum.TextXAlignment.Right, TextYAlignment = Enum.TextYAlignment.Top})

					local TrackContainer = New("Frame", {Parent = SliderFrame, BackgroundTransparency = 1, Size = UDim2.new(1,0,0,18), Position = UDim2.new(0,0,1,-18)})
					local Track = New("Frame", {Parent = TrackContainer, BackgroundColor3 = Color3.fromRGB(35,35,35), Size = UDim2.new(1,0,1,0), BorderSizePixel = 0})
					New("UICorner", {Parent = Track, CornerRadius = UDim.new(0.5,0)})
					New("UIStroke", {Parent = Track, Color = Color3.fromRGB(25,25,25), Thickness = 1})

					local Fill = New("Frame", {Parent = Track, BackgroundColor3 = Color3.fromRGB(200,200,200), Size = UDim2.new(0,0,1,0), BorderSizePixel = 0, AnchorPoint = Vector2.new(0,0)})
					New("UICorner", {Parent = Fill, CornerRadius = UDim.new(0.5,0)})

					local Knob = New("Frame", {Parent = Track, BackgroundColor3 = Color3.fromRGB(230,230,230), Size = UDim2.new(0, 18, 0, 18), AnchorPoint = Vector2.new(0, 0.5), Position = UDim2.new(0, 0, 0.5, 0), BorderSizePixel = 0})
					New("UICorner", {Parent = Knob, CornerRadius = UDim.new(0.5,0)})
					New("UIStroke", {Parent = Knob, Color = Color3.fromRGB(25,25,25), Thickness = 1})

					-- update visuals
					local function updateVisuals(val)
						local pct = 0
						if element.Max ~= element.Min then
							pct = (val - element.Min) / (element.Max - element.Min)
						end
						pct = math.clamp(pct, 0, 1)
						Fill.Size = UDim2.new(pct, 0, 1, 0)
						Knob.Position = UDim2.new(math.clamp(pct, 0, 1), -9, 0.5, 0)
						ValueLabel.Text = tostring(math.floor(val * 100) / 100)
					end

					updateVisuals(element.Value)

					-- slider dragging logic
					local draggingSlider = false
					local function setValueFromPos(x)
						local absX = x - Track.AbsolutePosition.X
						local width = Track.AbsoluteSize.X
						local pct = math.clamp(absX / math.max(width, 1), 0, 1)
						local newVal = element.Min + (element.Max - element.Min) * pct
						element.Value = newVal
						updateVisuals(element.Value)
						if element.Callback then pcall(element.Callback, element.Value) end
					end

					Track.InputBegan:Connect(function(inp)
						if inp.UserInputType == Enum.UserInputType.MouseButton1 then
							draggingSlider = true
							setValueFromPos(inp.Position.X)
						end
					end)
					Track.InputEnded:Connect(function(inp)
						if inp.UserInputType == Enum.UserInputType.MouseButton1 then
							draggingSlider = false
						end
					end)
					Knob.InputBegan:Connect(function(inp)
						if inp.UserInputType == Enum.UserInputType.MouseButton1 then
							draggingSlider = true
						end
					end)
					Knob.InputEnded:Connect(function(inp)
						if inp.UserInputType == Enum.UserInputType.MouseButton1 then
							draggingSlider = false
						end
					end)
					UserInputService.InputChanged:Connect(function(inp)
						if inp.UserInputType == Enum.UserInputType.MouseMovement and draggingSlider then
							setValueFromPos(inp.Position.X)
						end
					end)
				end
			end
		end
	end

	function Window:Destroy()
		if Window._SeizureUI then
			pcall(function() Window._SeizureUI:Destroy() end)
		end
		for i, win in pairs(Library.Windows) do
			if win == Window then
				table.remove(Library.Windows, i)
				break
			end
		end
		if Library.MainWindow == Window then
			Library.MainWindow = nil
		end
	end

	table.insert(Library.Windows, Window)
	Library.MainWindow = Window
	return Window
end

return Library
